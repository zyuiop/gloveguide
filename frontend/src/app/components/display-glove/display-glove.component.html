<!--
  ~     EPFL Gloves Guide - An application to help you choose the best gloves for a chemical work
  ~     Copyright (C) 2020 - Louis Vialar & EPFL GSCP
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU Affero General Public License as published
  ~     by the Free Software Foundation, either version 3 of the License, or
  ~     any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU Affero General Public License for more details.
  ~
  ~     You should have received a copy of the GNU Affero General Public License
  ~     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<ng-container *ngIf="selectedGlove$ | async as selectedGlove; else loading">
  <h3 i18n>Selected glove <b>{{selectedGlove.brand}} {{selectedGlove.name}}</b> (Ref {{selectedGlove.reference}})
    <button mat-raised-button color="accent" routerLink="update" *ngIf="auth.isLoggedIn()">Update this glove</button>

  </h3>


  <h4 i18n>Ranked #{{selectedGlove.ranking}} -
    <app-rating-badge [rating]="selectedGlove.rankingCategory"></app-rating-badge>
  </h4>
  <p i18n>Ranking among all gloves offered on the system - 1 being the best glove.</p>

  <p i18n><b>Recommendations: </b>{{selectedGlove.recommendations}}</p>
  <br>

  <br>

  <mat-accordion>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title i18n>Specifications</mat-panel-title>
      </mat-expansion-panel-header>


      <ul i18n>
        <li>Reference: <code>{{selectedGlove.reference}}</code></li>
        <li>Material: {{selectedGlove.materials.join(", ")}}</li>
        <li>Length: {{selectedGlove.specifications.length}}mm</li>
        <li *ngIf="selectedGlove.specifications.disposable">This glove is disposable.</li>
        <li>Palm thickness: {{selectedGlove.specifications.thickness}}mm</li>
        <li>Finger textured: {selectedGlove.specifications.fingerTextured, select, true {Yes} false {No}}</li>
        <li>Powdered: {selectedGlove.specifications.powdered, select, true {Yes} false {No}}</li>
        <li>Vulcanization agent(s): {!selectedGlove.specifications.vulcanizationAgent, select, true {Unknown} other { {{selectedGlove.specifications.vulcanizationAgent}} } } </li>
        <li><a href="https://www.iso.org/fr/standard/66421.html">EN ISO 374-1</a>:
          <ul>
            <li>Type {{selectedGlove.specifications.standardType}}</li>
            <li>Resistance {{selectedGlove.specifications.standardResistance}}</li>
            <li>AQL {{selectedGlove.specifications.aql}}</li>
          </ul>
        </li>
      </ul>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title i18n>Ratings</mat-panel-title>
      </mat-expansion-panel-header>
      <ul i18n>
        <li>Ease to wear:
          <app-rating-badge [rating]="selectedGlove.easeToWear"></app-rating-badge>
        </li>
        <li>Ease to remove:
          <app-rating-badge [rating]="selectedGlove.easeToRemove"></app-rating-badge>
        </li>
        <li>Glass handling:
          <ul>
            <li *ngFor="let pair of selectedGlove.glassHandling">{{pair.humidifier}}:
              <app-rating-badge [rating]="pair.glassHandling"></app-rating-badge>
              {pair.leavesMarks, select, true {(leaves marks))}}
            </li>
          </ul>
        </li>
        <li>Traction resistance:
          <ul>
            <li *ngFor="let pair of selectedGlove.tractionResistance">{{pair.humidifier}}:
              <app-rating-badge [rating]="pair.tractionResistance"></app-rating-badge>
            </li>
          </ul>
        </li>
      </ul>
    </mat-expansion-panel>
    <mat-expansion-panel expanded="true">
      <mat-expansion-panel-header>
        <mat-panel-title i18n> Substances compatibility</mat-panel-title>
      </mat-expansion-panel-header>

      <h3 i18n>Specific substances rating</h3>
      <p i18n>According to internal tests or spec sheets.</p>

      <app-resistances-table *ngIf="resistances$ | async as resistances; else loading" [resistances]="resistances"></app-resistances-table>


      <!--
      glassHandling: {}; // Map[String, GlassHandling]
      tractionResistance: {}; // Map[String, Rating.Value] -->
    </mat-expansion-panel>
  </mat-accordion>


</ng-container>

<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
